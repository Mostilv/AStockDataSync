# MongoDB 配置
mongodb:
  uri: "mongodb://localhost:27017/"

# baostock 配置
baostock:
  db: "baostock"
  basic: "stock_basic"
  daily: "daily_adjusted"
  weekly: "weekly_adjusted"
  monthly: "monthly_adjusted"
  minute_5: "minute_5_adjusted"
  history_years: 3             # 日/周/月默认回溯年限
  daily_call_limit: 150000      # Baostock 每日调用上限
  minute_start_date: "2019-01-02"
  minute_lookback_days: 30
  frequencies: ["d", "w", "m", "5"]
  index_codes: ["sh.000001"]   # 指数等需要保持的 code
  indicator_collection: "indicator_data"
  integrity_windows:
    d: 30
    w: 400
    m: 1500
    "5": 15

# akshare 配置
# 用于获取当日实时行情（baostock 无实时）以及财报、baostock 未覆盖的数据
akshare:
  db: "akshare_realtime"
  kline: "kline"
  daily: "daily"
  symbols: []                 # 留空时自动读取 baostock.basic 中的 code
  timeframes: ["5m"]  # 需要合成的周期
  sleep_seconds: 5            # 实时循环模式的轮询间隔
  source_tag: "akshare"       # 数据源标记（临时补齐）
  mirror_to_baostock: true    # 将 akshare 分钟线以临时数据写入 baostock.minute_5，待官方数据覆盖
  force_ipv4: true            # 避免 IPv6 路由被拦截，强制东财走 IPv4

# stock_middle_platform_backend 配置
stock_middle_platform_backend:
  base_url: "http://localhost:8000/api/v1"
  login_path: "/auth/login"
  basic_path: "/stocks/basic"
  kline_path: "/stocks/kline"
  indicator_path: "/indicators/records"
  username: "please-set-me"
  password: "please-set-me"
  verify_ssl: true
  timeout: 10
  batch_size: 500
  token_field: "token"
  token_prefix: "Bearer"
  token_header: "Authorization"
  provider: "astock-sync"
  basic_target: "primary"
  kline_target: "primary"
  indicator_target: "primary"
  industry_metrics:
    lookback_days: 12
    momentum_period: 5
    industry_limit: 28

# workflow 配置
workflow:
  daily_update:
    refresh_basic: true
    baostock:
      frequencies: ["d", "w", "m", "5"]
      full_update: false
      resume: true
      lookback_years: 3
      schedule:
        weekly: true
        monthly: true
    akshare:
      enabled: false
      loop_mode: false
      iterations: null
      ignore_hours: false
    tagging:
      industry: true
    indicators:
      enabled: true
      collection: "indicator_data"
      run_industry_metrics: true
      run_industry_breadth: true
      industry_metrics_lookback_days: 12
      industry_metrics_momentum: 5
      industry_limit: 28
      industry_codes: []
      breadth_indicator: "industry_breadth_ma20"
      breadth_timeframe: "1d"
      breadth_lookback_days: 60
      breadth_ma_window: 20
      jobs:
        - name: "sse_macd"
          type: "macd"
          symbol: "sh.000001"
          frequency: "d"
          params:
            fast: 12
            slow: 26
            signal: 9
